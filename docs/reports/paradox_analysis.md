# 로컬 테스트 vs 실제 점수 역전 현상 분석

## 🔍 발견된 패러독스

### 테스트 결과 역전
| 프롬프트 유형 | Llama-3.2 | Qwen2.5-7B | GPT-4o mini (Dacon) |
|-------------|-----------|------------|-------------------|
| 김경태 원본 | 56.5% ❌ | 56.5% ❌ | **98.0%** ✅ |
| 단순 키워드 | 55% ❌ | **95.7%** ✅ | 예상 70-80% ❌ |

## 🎯 원인 분석

### 1. **모델별 특성 차이**

#### GPT-4o mini
- **복잡한 논리 이해 가능** (∧, ∨, ∈ 등)
- **게이트 조건 완벽 처리**
- **문맥 기반 추론 강함**
- **긴 프롬프트에서도 안정적**

#### Llama-3.2 / Qwen2.5
- **단순 패턴 매칭 선호**
- **복잡한 조건문 처리 어려움**
- **키워드 기반 판단**
- **짧고 명확한 규칙만 이해**

### 2. **46개 샘플의 한계**

```python
# 샘플 분포
자동차: 20개 (43.5%)
비자동차: 26개 (56.5%)

# 문제점
- 너무 적은 샘플
- 특정 패턴에 과적합
- 실제 테스트셋과 분포 다를 수 있음
```

### 3. **김경태 프롬프트가 GPT-4o mini에서만 작동하는 이유**

#### 성공 요인
1. **게이트 조건**: `total≥3 AND (추가조건)`
   - GPT-4o mini는 이해 ✅
   - 로컬 LLM은 이해 못함 ❌

2. **수학적 표현**: `∈`, `∧`, `∨`
   - GPT-4o mini는 완벽 처리 ✅
   - 로컬 LLM은 무시하거나 오해 ❌

3. **음수 점수 시스템**
   - GPT-4o mini는 정확히 계산 ✅
   - 로컬 LLM은 단순 키워드만 봄 ❌

## 💡 김경태보다 나은 버전 가능성

### 이론적 개선 방향

#### 1. **게이트 조건 강화 + 길이 단축** (예상 0.98+)
```
[자동차뉴스]점수계산"1"또는"0"

완성차={현대차,기아,테슬라,BMW,벤츠,폭스바겐,도요타,포드,GM}
행위={출시,양산,판매,생산,투자}

점수:
+3 완성차주체
+2 자동차/전기차제목
+2 행위포함
+1 차량용명시
-3 ESS/UAM/항공
-2 배터리차량용불명

판정:점수≥3이고(차량용또는완성차+행위)→1
나머지→0
```
- 400자 (191자 단축)
- 핵심만 유지

#### 2. **영어 + 한글 혼합** (GPT-4o mini 최적화)
```
[Auto Classification] "1" or "0"

OEM={현대차,Kia,Tesla,BMW,Mercedes,VW,Toyota,Ford,GM}
Act={launch,production,sales,투자,계약}

Score:
+3 OEM subject
+2 EV/AV in title
+2 Act present
+1 "vehicle" explicit
-3 ESS/UAM/aviation
-2 battery w/o "vehicle"

Judge: score≥3 AND (vehicle OR OEM+Act)→1
else→0
```

#### 3. **메타 프롬프트 활용** (실험적)
```
당신은 자동차 산업 전문가입니다.
다음 규칙으로 뉴스를 분류하세요:

1. 완성차 기업이 주체면 → 1
2. "차량용" 명시되면 → 1
3. ESS/UAM/항공이면 → 0
4. 애매하면 → 0

출력: "1" 또는 "0"만
```

### 실제 개선 가능성

**현실적 한계:**
1. **테스트 불가능** - GPT-4o mini API 없음
2. **샘플 부족** - 46개로는 검증 불가
3. **위험성** - 실패시 점수 하락

**결론:**
- 김경태 원본이 **유일하게 검증된** 고득점 프롬프트
- 개선 시도는 **도박**
- 이론적으로는 가능하나 **검증 방법 없음**

## 📊 최종 권장사항

### 안전한 선택
1. **김경태 원본** (0.9801 검증)
2. **안전 버전** (0.9800 검증)

### 실험적 시도 (위험)
- 위의 개선안들
- 하지만 **실패 위험 높음**

### 핵심 교훈
> **"로컬 LLM 테스트는 GPT-4o mini 성능을 예측할 수 없다"**

- 로컬에서 잘 되는 것 → 실제로는 실패
- 로컬에서 실패하는 것 → 실제로는 성공
- **완전히 반대 결과**