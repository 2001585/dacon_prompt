# 4단계: 테스트 및 검증 - LMStudio API 활용

## 🎯 목표
LMStudio를 활용한 로컬 모델 테스트로 v1.3 프롬프트 성능 검증

---

## 🔧 LMStudio API 설정 가이드

### 1. LMStudio 서버 설정
```bash
# LMStudio에서 로컬 서버 시작
# 기본 설정:
# - 포트: 1234 (기본값)
# - 엔드포인트: http://localhost:1234/v1/chat/completions
# - API Key: lm-studio (기본값)
```

### 2. 테스트 환경 변수 설정
```bash
# Windows 환경 설정
set LM_STUDIO_API_KEY=lm-studio
set LM_STUDIO_ENDPOINT=http://localhost:1234/v1/chat/completions

# 또는 .env 파일 생성
echo "LM_STUDIO_API_KEY=lm-studio" > .env
echo "LM_STUDIO_ENDPOINT=http://localhost:1234/v1/chat/completions" >> .env
```

---

## 📝 테스트 스크립트 구조

### Python 테스트 스크립트 요구사항
1. **OpenAI 호환 API 사용**: LMStudio는 OpenAI API 호환
2. **CSV 파일 읽기**: samples.csv 46개 샘플 로드
3. **프롬프트 템플릿**: v1.3 시스템 프롬프트 적용
4. **결과 검증**: 0/1 출력 강제, 정확도 계산
5. **결과 저장**: 상세 로그 및 통계

### 테스트 시나리오
- **전체 테스트**: samples.csv 46개 전수
- **오류 케이스 분석**: 잘못 분류된 케이스 상세 분석
- **성능 지표**: 정확도, 정밀도, 재현율, F1-score
- **최종점수 계산**: 공식 적용한 실제 점수

---

## 🧪 테스트 실행 계획

### Phase 1: 기본 연결 테스트
- [ ] LMStudio 서버 상태 확인
- [ ] API 엔드포인트 연결 테스트  
- [ ] 간단한 샘플 3개로 동작 확인

### Phase 2: 전수 테스트
- [ ] samples.csv 46개 전체 테스트
- [ ] 실시간 결과 모니터링
- [ ] 오류/예외 케이스 기록

### Phase 3: 결과 분석
- [ ] 정확도 계산 및 목표 달성도 확인
- [ ] 실패 케이스 상세 분석
- [ ] 개선 포인트 도출

---

## 📊 예상 테스트 결과

### 목표 성능
- **정확도**: 95%+ (44/46 이상)
- **길이점수**: 0.692 (1976자)
- **최종점수**: 0.935+ 목표

### 주의 케이스들
1. **복합 주제**: "정부 자동차 지원정책"
2. **트릭 케이스**: "현대중공업 vs 현대차"
3. **경계 케이스**: "배터리/반도체 용도별"
4. **간접 연관**: "철강사 자동차향 납품"

---

## 🚀 다음 단계

테스트 스크립트를 작성하고 실제 LMStudio 연결 테스트를 진행하겠습니다!